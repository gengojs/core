{"version":3,"sources":["core/index.js"],"names":[],"mappings":";;;;;;;;;;;;uBAAgB,YAAY;;;;kCACuB,sBAAsB;;4BACvD,eAAe;;;;sBACnB,QAAQ;;;;;;;;;IAKhB,KAAK;;;;;;;;AAOG,WAPR,KAAK,CAOI,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE;0BAPrC,KAAK;;AAQP,mCAAM,MAAM,EAAE,OAAO,cAAY,KAAK,CAAC,IAAI,yBAA2B,CAAC;AACvE,mCAAM,MAAM,EAAE,MAAM;;mBAEL,IAAI,CAAC,OAAO,GAAG,qBAAI,OAAO,CAAA;;mBAE1B,IAAI,CAAC,OAAO,GAAG,gCAAO,OAAO,CAAC,CAAA,CAAI,CAAC;;AAElD,QAAI,CAAC,OAAO,GAAG,iCAAQ,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;;AAExD,QAAG,CAAC,oBAAE,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EACzD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;GACpC;;;;;;;;;;;;;eAnBG,KAAK;;WA0BH,eAAC,MAAM,EAAW;AACtB,qCAAM,MAAM,EAAE,OAAO,cAAY,KAAK,CAAC,IAAI,mBAAqB,CAAC;;;wCADjD,IAAI;AAAJ,YAAI;;;AAGpB,aAAO,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,kCAAS,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;KAClE;;;;;;;;;;WAOI,cAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;AACpB,qCAAM,MAAM,EAAE,OAAO,cAAY,KAAK,CAAC,IAAI,kBAAoB,CAAC;;AAEhE,UAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;AAE3C,UAAI,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;AAE3C,UAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;;AAE7C,uCAAQ,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;KACrC;;;;;;;;;WAMM,kBAAG;AACR,qCAAM,MAAM,EAAE,OAAO,cAAY,KAAK,CAAC,IAAI,oBAAsB,CAAC;;AAElE,aAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;KAChD;;;SAzDG,KAAK;;;qBA8DI,UAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAK;AAC7C,cAAY,CAAC;AACb,SAAO,IAAI,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;CAC9C","file":"core/index.js","sourcesContent":["import pkg from '../package';\nimport { inputify, plugify, optify, servify } from 'gengojs-core-modules';\nimport debug from 'gengojs-debug';\nimport _ from 'lodash';\n/**\n * The core of gengo.js\n * @class Gengo\n */\nclass Gengo {\n  /**\n   * @constructor \n   * @param {Object} options The options for each plugin.\n   * @param {Object | Array | Function} plugins The plugin(s) for the core.\n   * @param {Object} defaults The default plugins for the core.\n   */\n  constructor (options, plugins, defaults) {\n    debug('core', 'debug', `class: ${Gengo.name}`, `process: constructor`);\n    debug('core', 'info',\n      // Current version\n      `version: ${(this.version = pkg.version)}`,\n      // Options\n      `options: ${(this.options = optify(options))}`);\n    // Set Plugins\n    this.plugins = plugify(plugins, this.options, defaults);\n    // Backend plugin\n    if(!_.isEmpty(this.plugins.backend) && this.plugins.backend)\n      this.plugins.backend.apply(this);\n  }\n  /**\n   * Parses and i18ns the phrase.\n   * @param {Object | String} phrase The phrase to i18n.\n   * @param {Array} args The arguments to apply to the phrase.\n   * @returns {String} The i18ned phrase.\n   */\n  parse (phrase, ...args) {\n    debug('core', 'debug', `class: ${Gengo.name}`, `process: parse`);\n    // Parser plugin\n    return this.plugins.parser.apply(this, [inputify(phrase, args)]);\n  }\n  /**\n   * The Middleware for Node frameworks\n   * @param {Object} req The request object.\n   * @param {Object} res The response object.\n   * @param {Function} next The next function.\n   */\n  ship (req, res, next) {\n    debug('core', 'debug', `class: ${Gengo.name}`, `process: ship`);\n    // Header plugin\n    this.plugins.header.apply(this, arguments);\n    // Router plugin\n    this.plugins.router.apply(this, arguments);\n    // Localize plugin\n    this.plugins.localize.apply(this, arguments);\n    // Apply API to the objects/request/response\n    servify(this).apply(req, res, next);\n  }\n  /**\n   * Applies the API to req, res, and other objects.\n   * @param {...arguments} arguments The arguments to apply the API.\n   * @return {Object} The applied object\n   */\n  assign () {\n    debug('core', 'debug', `class: ${Gengo.name}`, `process: assign`);\n    // API plugin\n    return this.plugins.api.apply(this, arguments);\n  }\n}\n/**\n * Creates a new Gengo instance\n */\nexport default (options, plugins, defaults) => {\n  'use strict';\n  return new Gengo(options, plugins, defaults);\n};  "],"sourceRoot":"/source/"}